name: Christmas Lights Contribution Graph

on:
  push:
    branches:
      - main
  workflow_dispatch:

jobs:
  generate:
    runs-on: ubuntu-latest

    steps:
      # 1Ô∏è‚É£ Faz checkout do reposit√≥rio com todo o hist√≥rico
      - name: Checkout do reposit√≥rio
        uses: actions/checkout@v4
        with:
          fetch-depth: 0

      # 2Ô∏è‚É£ Gera o SVG do gr√°fico de contribui√ß√µes com anima√ß√£o natalina
      - name: Gerar anima√ß√£o de luzes de Natal
        uses: lowlighter/metrics@latest
        with:
          token: ${{ secrets.GITHUB_TOKEN }}
          user: ${{ github.repository_owner }}
          template: classic
          config_display: large
          config_colors: "#0a0a0a,#ff0000,#00ff00,#ffd700,#ffffff" # cores estilo luzes de Natal
          config_animations: true
          filename: christmas-lights.svg

      # 3Ô∏è‚É£ Commit e push do SVG gerado
      - name: Commit e push do SVG
        uses: stefanzweifel/git-auto-commit-action@v5
        with:
          commit_message: "üéÑ Atualiza anima√ß√£o de luzes de Natal"
